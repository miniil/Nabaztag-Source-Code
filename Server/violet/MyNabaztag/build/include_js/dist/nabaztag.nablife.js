bloc.services=function(A){var B=null;return{init:function(){contener=A("#bloc-MyServices");A("ul.list a",contener).unbind().bind("click",bloc.services.serviceLoader)},clearSelected:function(){A("ul.list a",contener).removeClass("selected")},getElementByServiceName:function(C){var E=A("a[title*="+C+"]");var D=false;A(E).each(function(F,H){var G=A.trim(A(H).attr("title"));if(G==C){D=H;return false}});return D},elementDestroy:function(C){var E=(A(C).length>0)?C:bloc.services.getElementByServiceName(C);var D=A(E).parents("li");bloc.services.clearSelected();A(D).destroyMe()},elementHighlight:function(C){var E=(A(C).length>0)?C:bloc.services.getElementByServiceName(C);var D=A(E).parents("li");A("a",D).addClass("selected");if(!A(D).is(":visible")&&A(D).length>0){A("ul.tri a.tout",contener).trigger("click")}},elementLoadingOff:function(){A("img.loader",contener).hide()},serviceLoader:function(){var D=A(this).attr("href");if(nablife.loadSrvPage(D)!=-1){var C=A(this).parents("li");A("img.loader",C).show();bloc.services.clearSelected();bloc.services.elementHighlight(this)}return false}}}(jQuery);nablife=function(F){var E=0;var D=0;var C=0;var A="";var B=false;var G=null;return{getCurrentServiceName:function(){return A},init:function(H){if(!H){D=0;C=0}G=F("div.contentMainTab:visible")[0];if(F("div.categ-chooser",G).length==0){return false}nablife.initCategChooser();nablife.initSrvChooser();nablife.initLngChooser();F("h3 span").Tooltip({delay:500,track:false,showURL:false,extraClass:"notFixed"})},initCategChooser:function(){var I=F("div.categ-chooser select",G);var H=(F.browser.msie6)?F(I).parents("div.menu"):F("div.mainTab");F(I)[0].onmousewheel=function(){return false};F(I).unbind().bind("change",function(){if(J==""){return false}var K=F(":selected",this).is(".service")?"service":"nabcast";var J=F(this).val();var L=(K=="service")?F("#contentServicesByCateg"):F("#contentNabaztaland");F(H).block();F(L).load(J,function(){F("#contentAllServices").hide();F("#contentServicesByCateg").hide();F("#contentNabaztaland").hide();F(this).show();nablife.init();var M=new RegExp("idCateg=([0-9]+)").exec(J);if(K=="service"){E=(M!=null)?M[1]:0;D=0}else{D=(M!=null)?M[1]:0;E=0}F(H).unblock()})})},initLngChooser:function(){F("ul.langSelect a").each(function(){var H=(F.browser.msie6)?F(this).parents("div.menu"):F("div.main-layout");F(this).bind("click",function(){F(H).block();F(G).load(F(this).attr("href"),function(){F(H).unblock();nablife.init()});return false})})},initSrvChooser:function(){var H=function(){if(B){return }F(this).css("cursor","pointer");if(!F.browser.msie6){F("h3",this).addClass("selected")}F("div.text-status-holder strong",this).show();F("a.add-srv",this).addClass("selected")};var I=function(){if(B){return }F("h3",this).removeClass("selected");F("div.text-status-holder strong",this).hide();F("a.add-srv",this).removeClass("selected")};if(F("div.list-services a.add-srv").length>0){F("div.list-services").each(function(){var J=F("a.add-srv",this);F("div.text-status-holder strong",this).hide();F(this).hover(H,I);F(this).bind("click",nablife.loadSrvPage)})}},returnToSrvList:function(){A="";bloc.services.clearSelected();F("#contentSrvConfig").hide();var I=null;if(E>0&&D==0){I=F("#contentServicesByCateg")}else{if(E==0&&D>0){I=F("#contentNabaztaland")}else{I=F("#contentAllServices")}}var H=F.trim(F(I).html());if(H.length<20){F(I).load("myNablife.do",function(){F(I).show();goToTheTopOfThePage();nablife.init()})}else{F(I).show();goToTheTopOfThePage()}},loadSrvPage:function(I,M){if(B){return -1}var H="";var L=null;var K="";if(varType(I)=="string"){H=I;if(F("#contentSrvConfig").html().length<100){F("div.mainTabBody").block()}var J=M;var M=function(){var N=F("h2 span.nabcast-title").html();if(N==null){N=F("#contentSrvConfig h2").html()}if(N!=null){var O=F.trim(N);bloc.services.elementHighlight(O);bloc.services.elementLoadingOff()}if(J!=null){J()}}}else{H=F("a.add-srv",this).attr("href");L=this;F(L).block();K=F.trim(F("h3",this).text())}B=true;F("#contentSrvConfig").load(antiCacheUrl(H),function(){A=F.trim(F(".service-introduction .nabcast-title, .service-introduction h2").eq(0).text());B=false;goToTheTopOfThePage();bloc.services.elementHighlight(K);F("div.contentMainTab:visible").hide();F(this).show();F("#contentSrvConfig").show();F(L).unblock().trigger("mouseout");F(L).unblock();TB_init("contentSrvConfig");if(M!=null){M()}});return false}}}(jQuery);function nablifeValidateAddMp3(E){if(isEmpty("idMp3")){customAlertN(msg_txt["nabcast_noMp3"]);return false}if($("#myNabcastLatercheck").get(0).checked){var B=$("#time").hourSelect_Validate();if(B!=true){customAlertN(B);return false}B=$("#date_delay").dateSelect_Validate();if(B!=true){customAlertN(B);return false}var C=$("#date_delay").val();var D=C.split("/");var A=D[2]+"-"+D[1]+"-"+D[0];if(!checkDate(A)){customAlertN(C);return false}}else{$("#date_delay").val("")}var F=$("#time").val();F=F.split(":");$("input[@name=heure_delay]").val(F[0]);submitAjaxForm("nabaztalandAdd","mynabcastUpload")}function nablifeValidateNabcastConfig(A){var B=$("div.nabcastSubscribe");var C=function(){formSubmitBackground("nabcastConfig",function(F,E){var D=$("#time",B).hourSelect_GetTime();if(D["heures"]!=0){$(".h",B).get(0).value=D["heures"]}if(D["minutes"]!=0){$(".m",B).get(0).value=D["minutes"]}endSrvConfig(F,E,A)})};$("#heures",B).val($(".h",B).val());$("#minutes",B).val($(".m",B).val());if($("#time",B).val()==""){customConfirmN(msg_txt["bad_time_subscribe_nabcast"],null,function(){C()},true)}else{C()}return false}function nablifeValidateAirConfig(C){var B=$("#time1").hourSelect_Validate(false);var A=$("#time2").hourSelect_Validate(false);if(B!=true){customAlertN(B);return false}if(A!=true){customAlertN(A);return false}if(isEmpty("listVille")){customAlertN(msg_txt["choix_ville"]);return false}if(isEmpty("time2")&&isEmpty("time1")&&!checkboxIsChecked("lm")){customAlertN(msg_txt["lumin_ou_horaire"]);return false}serviceUpdate(C);return false}function nablifeValidateHumeurConfig(A){if(isEmpty("freqSrv")){customAlertN(msg_txt["une_frequence"]);return false}if($("div.spoken-lang-service input:checked").length==0){customAlertN(msg_txt["une_langue"]);return false}serviceUpdate(A);return false}function nablifeValidateTaichiConfig(A){if(isEmpty("freqSrv")){customAlertN(msg_txt["une_frequence"]);return false}serviceUpdate(A);return false}function nablifeValidateBilanConfig(B){var A=$("#time").hourSelect_Validate(true);if(A!=true){customAlertN(A);return false}if(isEmpty("freqSrv")){customAlertN(msg_txt["un_jour"]);return false}serviceUpdate(B);return false}function nablifeValidatePeriphConfig(C){var B=$("#time1").hourSelect_Validate(true);var A=$("#time2").hourSelect_Validate(true);if($("#arrivee").val()==$("#depart").val()){customAlertN(msg_txt["depart_arrive_choix"]);return false}if(isEmpty("time2")&&isEmpty("time1")&&!checkboxIsChecked("lumiere")){customAlertN(msg_txt["lumin_ou_horaire"]);return false}if(!isEmpty("time2")&&A!=true){customAlertN(A);return false}if(!isEmpty("time1")&&B!=true){customAlertN(B);return false}serviceUpdate(C);return false}function nablifeValidateReveilConfig(B){var A=$("#time").hourSelect_Validate(true);if(A!=true){customAlertN(A);return false}if($("#son").val()==0){customAlertN(msg_txt["choix_musique"]);return false}serviceUpdate(B);return false}function nablifeValidateReveilFullConfig(B){var A=new Array();var D=new Array();var C=true;for(i=1;i<=7;i++){A[i]=$("#time"+i).val();D[i]=$.chooseSong.getId("son"+i);if(A[i]!=""&&D[i]!=0){C=false}if(A[i]==""&&D[i]!=0){C=true;break}if(A[i]!=""&&D[i]==0){C=true;break}}if(C){customAlertN(msg_txt["verify_hour_and_song"]);return false}serviceUpdate(B);return false}function nablifeValidateBourseFreeConfig(A){if(isEmpty("list")){customAlertN(msg_txt["choix_indicateur"]);return false}if(isEmpty("time2")&&isEmpty("time1")&&!checkboxIsChecked("lumiere")){customAlertN(msg_txt["lumin_ou_horaire"]);return false}serviceUpdate(A);return false}function nablifeValidateHorlogeFreeConfig(A){if($("input:checked[@name=checkListClockType]").length<1){customAlertN(msg_txt["choix_type_horloge"]);return false}if($("input:checked[@name=checkListLang]").length<1){customAlertN(msg_txt["choix_langue"]);return false}return true}function nablifeValidateHorlogeUpload(A,B,C){if($("#musicFile",B).val()==""){customAlertN(msg_txt["mp3_invalidFile"]);return false}return true}function nablifeValidateMeteoFreeConfig(A){if(isEmpty("idVille")){customAlertN(msg_txt["choix_ville"]);return false}if(isEmpty("time2")&&isEmpty("time1")&&!checkboxIsChecked("fl")){customAlertN(msg_txt["lumin_ou_horaire"]);return false}serviceUpdate(A);return false}function nablifeValidateBourseFullConfig(A){if(isEmpty("alertName")){customAlertN(msg_txt["choix_nom"]);return false}if((isEmpty("list")&&isEmpty("valName"))||(!isEmpty("list")&&!isEmpty("valName"))){customAlertN(msg_txt["val_ou_indice"]);return false}if(isEmpty("time2")&&isEmpty("time1")&&!checkboxIsChecked("lumiere")){customAlertN(msg_txt["lumin_ou_horaire"]);return false}serviceUpdate(A);return false}function nablifeValidateRssFullConfig(A,E,H){if(!isNum($("#srvNbNews").val())||($("#srvNbNews").val()<1)||($("#srvNbNews").val()>30)){customAlertN(msg_txt["error_nbNews"]);return false}if(isEmpty("name")){customAlertN(msg_txt["choix_rss_name"]);return false}if(isEmpty("url")||$("#url").val().indexOf(")")!=-1||$("#url").val().indexOf("(")!=-1){customAlertN(msg_txt["unvalid_caracter_url"]);return false}var G="feed://";if($("#url").val().indexOf(G)!=-1){var B=$("#url").val().replace(G,"http://");$("#url").val(B)}var D=new RegExp("(http|https)://?(?:[a-z0-9](?:[-a-z0-9]*[a-z0-9])?.)+([a-z]{2,4})");if(!D.test($("#url").val())){customAlertN(msg_txt["unvalid_caracter_url"]);return false}if($("#confHeure").attr("checked")){var F=$("#time1").hourSelect_Validate(true);var C=$("#time2").hourSelect_Validate(true);if(isEmpty("time1")&&isEmpty("time2")){customAlertN(msg_txt["choix_horaire"]);return false}}return true}function nablifeValidatePodcastFullConfig(A,E,G){if(!isNum($("#podcastNbNews").val())||($("#podcastNbNews").val()<1)||($("#podcastNbNews").val()>30)){customAlertN(msg_txt["error_nbNews"]);return false}if(isEmpty($("#podcastUrl").val())||$("#podcastUrl").val().indexOf(")")!=-1||$("#podcastUrl").val().indexOf("(")!=-1){customAlertN(msg_txt["unvalid_caracter_url"]);return false}if($("#podcastUrl").val().match("^(?:(?:feed?)://)")!=null){var B=$("#podcastUrl").val().replace(/^(?:(?:feed?):\/\/)/,"http://");$("#podcastUrl").val(B)}var D=new RegExp("(http|https)://?(?:[a-z0-9](?:[-a-z0-9]*[a-z0-9])?.)+([a-z]{2,4})");if(!D.test($("#podcastUrl").val())){customAlertN(msg_txt["unvalid_caracter_url"]);return false}if($("#confHeure").attr("checked")){var F=$("#time1").hourSelect_Validate(true);var C=$("#time2").hourSelect_Validate(true);if(isEmpty("time1")&&isEmpty("time2")){customAlertN(msg_txt["choix_horaire"]);return false}}return true}function nablifeValidateWebRadioFreeConfig(A){if($("input.hourPicker[@value!=]").length<1){customAlertN(msg_txt["radio_time_choose"])}else{serviceUpdate(A)}return false}function nablifeValidateFlickrConfig(A,B,C){if(isEmpty("login")){customAlertN(msg_txt["srv_bad_login"]);return false}return true}function nablifeValidateTwitterConfig(A,B,C){if(isEmpty("login")){customAlertN(msg_txt["srv_bad_login"]);return false}return true}function nablifeValidateGmailConfig(A,B,C){if(isEmpty("login")){customAlertN(msg_txt["srv_bad_login"]);return false}if(isEmpty("password")){customAlertN(msg_txt["srv_bad_password"]);return false}return true}function nablifeValidateRssFreeConfig(A){if(($("#rssNbNews").val()<1)||($("#rssNbNews").val()>30)){customAlertN(msg_txt["error_nbNews"]);return false}if(!isNum($("#rssNbNews").val())){customAlertN(msg_txt["error_nbNews"]);return false}if($("#confHeure").attr("checked")){var C=$("#time1").hourSelect_Validate(true);var B=$("#time2").hourSelect_Validate(true);if(isEmpty("time1")&&isEmpty("time2")){customAlertN(msg_txt["choix_horaire"]);return false}}serviceUpdate(A);return false}function nablifeValidatePodcastFreeConfig(A){if(($("#podcastNbNews").val()<1)||($("#podcastNbNews").val()>30)){customAlertN(msg_txt["error_nbNews"]);return false}if(!isNum($("#podcastNbNews").val())){customAlertN(msg_txt["error_nbNews"]);return false}if($("#confHeure").attr("checked")){var C=$("#time1").hourSelect_Validate(true);var B=$("#time2").hourSelect_Validate(true);if(isEmpty("time1")&&isEmpty("time2")){customAlertN(msg_txt["choix_horaire"]);return false}}serviceUpdate(A);return false}function nablifeValidateDialogConfig(A){if(isEmpty("friendName")){customAlertN(msg_txt["emptyName"]);return false}serviceUpdate(A);return false}function nablifeValidateMailConfig(miseAjour,selectId){if(isEmpty("mail_serveur")){customAlertN(msg_txt["mail_serveur"]);return false}if(isEmpty("mail_compte")){customAlertN(msg_txt["mail_compte"]);return false}if(isEmpty("mail_password")){customAlertN(msg_txt["mail_password"]);return false}formSubmitBackground("srvMailConfig",function(html){var srv_src=$("input[name=srv_src]").val();if(srv_src==""){$("#config").html(html)}else{$("#config").html(html)}$("#config script").each(function(){eval($(this).html())});if(selectId==null){blocLoad("bloc-MyServices",null,function(){blocMyServices_Select("id_6_2")})}});return false}